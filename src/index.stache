<html>
  <head>
    <title>{{title}}</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    {{asset "css"}}
  </head>
  <body>
    <nav id="page-nav">
      <a can-href="{page='how-to'}">Help</a>
      <a can-href="{page='register'}">Register Component</a>
    </nav>

    <main>
      <can-import from="canrocks/styles.css!" />
      <can-import from="canrocks/app" as="viewModel" />
      <can-import from="canrocks/routes" />
      <can-import from="canrocks/loading.component!" />
      <can-import from="can/view/href/" />

      <a can-href="{page='home'}">
        <h1>{{siteName}}</h1>
      </a>

      {{#eq page "home"}}
        <can-import from="canrocks/home/home.component!" can-tag="loading">
          <home-page></home-page>
        </can-import>
      {{/eq}}
      {{#eq page "search"}}
        <can-import from="canrocks/search/search.component!" can-tag="loading">
          <search-results search-term="{query}"></search-results>
        </can-import>
      {{/eq}}
      {{#eq page "components"}}
        <can-import from="canrocks/component/component.component!" can-tag="loading">
          <component-page package-name="{package}"></component-page>
        </can-import>
      {{/eq}}
      {{#eq page "how-to"}}
        <can-import from="canrocks/how-to/how-to.component!" can-tag="loading">
          <how-to></how-to>
        </can-import>
      {{/eq}}
      {{#eq page "register"}}
        <can-import from="canrocks/register/register.component!" can-tag="loading">
          <register-component><register-component>
        </can-import>
      {{/eq}}
    </main>

    {{asset "inline-cache"}}

    {{#switch @env.NODE_ENV}}
      {{#case "production"}}
        <script src="/node_modules/steal/steal.production.js"  main="canrocks/index.stache!done-autorender"></script>
      {{/case}}
      {{#default}}
        <script src="/node_modules/steal/steal.js"></script>
      {{/default}}
    {{/switch}}
  </body>
</html>
